/* ConsoleSink_LinuxVTerm.h
 * 
 *  Author          : Alexander J. Yee
 *  Date Created    : 08/05/2024
 *  Last Modified   : 08/05/2024
 * 
 */

#pragma once
#ifndef ymp_Console_ConsoleSink_LinuxVTerm_H
#define ymp_Console_ConsoleSink_LinuxVTerm_H
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
//  Dependencies
#include "PublicLibs/ConsoleIO/OutputStream.h"
namespace ymp{
namespace Console{
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
class ConsoleSink_LinuxVTerm : public ConsoleSink{
public:
    ConsoleSink_LinuxVTerm(StatusPrintMode mode, bool enable_colors, upL_t line_length);

    virtual std::unique_ptr<ConsoleSink> clone(
        StatusPrintMode mode,
        bool enable_colors,
        upL_t line_length
    ) const override;

    virtual void operator+=(const ColorString& str) override;
    virtual void clear_temp_lines() override;

private:
    void internal_print(const char* str);
    void internal_print(const std::string& str);
    virtual void prepare_overwrite(upL_t lines_to_replace_with) override;
    virtual void internal_print(const ColorString& str) override;

private:
    const std::string m_blank_line;
};
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
}
}
#endif
