/* ParallelRangeEndPoints.h
 * 
 *  Author          : Alexander J. Yee
 *  Date Created    : 08/27/2014
 *  Last Modified   : 09/02/2024
 * 
 */

#pragma once
#ifndef ymp_Concurrency_ParallelRangeEndPoints_H
#define ymp_Concurrency_ParallelRangeEndPoints_H
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
//  Dependencies
#include "PublicLibs/CompilerSettings.h"
#include "ParallelAction.h"
namespace ymp{
namespace ParallelizerTools{
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
//  Helper function for handling degenerate cases.
//  Returns true if operation was done. False if nothing was done.
YM_FORCE_INLINE bool run_in_parallel_range_degenerate(
    ParallelContext& parallel_context, upL_t tds,
    ParallelAction& action, upL_t si, upL_t ei
){
    if (ei <= si){
        return true;
    }

    if (ei - si == 1){
        action.run(parallel_context, si);
        return true;
    }

    if (tds <= 1){
        for (; si < ei; si++){
            action.run(parallel_context, si);
        }
        return true;
    }

    return false;
}
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
}
}
#endif
